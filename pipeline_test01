node {
    def artiServer
    def buildInfo
    def rtMaven
    
    stage('SCM'){
        git 'http://gitlab.jackyops.com/jacky/project-examples.git'
    }
    
    stage('set env'){
        artiServer = Artifactory.newServer url: "http://arti.jackyops.com/artifactory", credentialsId: 'jfrog-artifactory'
        buildInfo = Artifactory.newBuildInfo()
        rtMaven = Artifactory.newMavenBuild()
    }
    
    stage('change version tag'){
        
    }
      
    stage('Artifactory configuration'){
        rtMaven.tool = 'maven3'
        rtMaven.deployer releaseRepo: 'internal-releases-local',snapshotRepo:'internal-snapshots-local',server: artiServer
    }
    
    stage('Exec Maven'){
        rtMaven.run pom: 'maven-example/pom.xml', goals: 'clean install', buildInfo: buildInfo
    }

    stage('Publish build info'){

    }

    stage('sonar scan'){

    }
    stage('sonar result post'){
        
    }
    stage('xray scan'){
        
    }
    stage('xray result post'){
        
    }
    stage('auto test'){
        
    }
    stage('auto test result post'){
        
    }
    stage('promotion'){
        
    }
    stage('deploy'){
        
    }
    stage('deploy result post'){
        
    }
    stage('mail'){
        
    }
}
